# Faust_demon
Example of Shell scripts launching and managing background processes.
## Fausto.sh
It has a help function that displays the commands available to the user on the screen. All access to common resources between Faust and Daemon is synchronized with a lock via the flock command.
In the text body, the first thing it does is to check if the daemon process is active, if not, it launches it in the background, disassociating it from the terminal, deletes the files and directories used
for Fausto and Demonio, recreates them again (except for Apocalypse which tells Demon that he must end), and adds an entry to Biblia.txt with the date indicating that the daemon has been created.
After creating the daemon and common resources (if necessary), it goes on to parse the input arguments, first considering the case where no input arguments are included, which will display an error message on the screen. After considering the case where there is only one input argument, Fausto will evaluate the arguments "list" "help" and "end" as correct. List displays on the screen the contents of the processes file, the service_processes and the periodic_processes. These files contain, in each line, the pid and the instructions of each active process. The help argument will display the commands available to Fausto and the end argument will create the Apocalypse file, which will cause Demonio to terminate its execution after finishing all processes launched by Fausto. Any other solitary arguments that are not one of those described will cause an error message to be displayed on the screen. Lastly he considers the case where there are two input arguments. Fausto will now evaluate the arguments “run” “run-service” “run-periodic” and “stop” as correct. The run argument launches the command contained in the second argument only once. To do this, it launches an sh instance in the background, passing it the command to be executed as an argument. After launching the new process, it captures its pid and stores it together with the instruction in the "processes" file. The “run-service” argument will do exactly the same, with the exception that the pid and the instruction are stored in the file “procesos_servicio”. In the case of periodic-processes, the user is asked for a period in seconds, and the information is saved in the "periodic_processes" file, where, in addition to the pid and the command, the startup time and period are stored. The stop argument followed by a pid makes Fausto search the three active process files for the referenced pid, if it exists, it creates a file whose name is that same pid in the Hell folder. Any other case with two or more input arguments will cause an error message to be displayed.
## Demonio.sh
Demonio.sh
In the main loop of Demonio we check the existence of the Apocalypse file, if it does not exist it remains in the loop, in which the files processes, processes_service and processes_periodical will be read sequentially, doing different actions according to the data processed in the reading.
